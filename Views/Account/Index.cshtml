@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Inventory Demand Optimizer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="~/images/logo.png">

  <!-- External Libraries -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Calistoga" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>

  <style>
    body {
      font-family: 'Calistoga', cursive;
      margin: 0;
      padding: 0;
    }

    .navbar, .navbar-default, .navbar-inverse {
      margin-bottom: 0 !important;
      border-radius: 0 !important;
    }

    .navbar-brand {
      font-size: 2rem;
    }

    #myNavbar .nav>li>a {
      font-size: 1.4rem;
      padding: 15px 20px;
    }

    #myNavbar .navbar-nav>li>a:hover {
      background: #222;
      color: #fff;
    }

    .scrolling_text {
      overflow: hidden;
      background: #c0392b;
      color: #fff;
      height: 50px;
      display: flex;
      align-items: center;
      white-space: nowrap;
      position: relative;
      font-size: 1.3rem;
      font-weight: bold;
    }

    .scrolling_text span {
      display: inline-block;
      padding-left: 100%;
      animation: scroll-left-to-right 60s linear infinite;
    }

    @@keyframes scroll-left-to-right {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .background {
      position: relative;
      padding: 80px 0;
      overflow: hidden;
    }

    .background::before {
      content: "";
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: url('/images/background.jpg') no-repeat center center;
      background-size: cover;
      filter: blur(4px);
      z-index: 0;
    }

    .background .container-fluid {
      position: relative;
      z-index: 1;
    }

    .center-wrapper {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 60px;
    }

    .card {
      width: 320px;
      height: 420px;
      perspective: 1000px;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.8s;
    }

    .card.rotate .card-inner {
      transform: rotateY(180deg);
    }

    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 10px;
      background: rgba(0, 0, 0, 0.4);
      box-shadow: 0 8px 32px rgba(0,0,0,0.4);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 30px;
      box-sizing: border-box;
      text-align: center;
      color: #fff;
    }

    .card-back {
      transform: rotateY(180deg);
    }

    .card-icon {
      font-size: 90px;
      color: white;
    }

    .card-front h1 {
      font-size: 2.2rem;
      margin-bottom: 15px;
      color: #fff;
      text-shadow: 0 0 3px #000;
    }

    .card-front p {
      font-size: 1.2rem;
    }

    .card-back .close {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 2rem;
      background: none;
      border: none;
      cursor: pointer;
      color: #fff;
    }

    .card-back label {
      font-size: 1.2rem;
    }

    .card-back .form-control {
      font-size: 1.2rem;
      margin-bottom: 15px;
    }

    .card-back .btn-primary,
    .card-back .btn-success {
      font-size: 1.4rem;
    }

    #about-section {
      padding: 60px 0;
      background-color: #f3f3f3 !important; /* Light grey */
    }

    #about-section h2 {
      font-size: 2.8rem;
      margin-bottom: 20px;
    }

    #about-section .lead {
      font-size: 1.4rem;
      margin-bottom: 30px;
    }

    #about-section .btn {
      font-size: 1.4rem;
      margin: 0 10px;
      color: #000 !important;
    }

    .footer {
      background: #222;
      color: #fff;
      padding: 15px;
      text-align: center;
      font-size: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
    }

    .footer .social a {
      margin: 0 5px;
      font-size: 1.2rem;
      color: #fff;
    }

    .icon-btn-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      margin-top: 40px;
    }
    /* in your <style> */
    .card-back .text-muted {
      color: rgba(255,255,255,0.85) !important;
    }

  </style>
</head>

<body>
  @* show the banner and auto-flip into the Login card if we just signed up *@
  @if (TempData["SignupSuccess"] != null)
  {
      <div class="alert alert-success text-center">
        @TempData["SignupSuccess"]
      </div>

      <script>
      document.addEventListener("DOMContentLoaded", function(){
        // make sure signup is closed:
        document.getElementById("rotatesgnup").classList.remove("rotate");
        // open the login panel:
        document.getElementById("rotatelgn").classList.add("rotate");
      });
      </script>
  }

  <!-- Navbar -->
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Inventory Demand Optimizer</a>
      </div>
      <ul class="nav navbar-nav navbar-right">
        <li><img src="~/images/logo.png" height="50" style="padding:5px 15px;"></li>
      </ul>
    </div>
  </nav>

  <!-- Secondary Navbar -->
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse"
                data-target="#myNavbar">
          <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="mailto:support@inventoryoptimizer.com">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Scrolling Bar -->
  <div class="scrolling_text">
    <span>*Do not share your login credentials or internal forecast reports with unauthorized personnel.</span>
  </div>

  <!-- Login / Signup Cards -->
  <div class="background">
    <div class="container-fluid center-wrapper">

      <!-- Signup Card -->
      <div class="card rotate-box" id="rotatesgnup">
        <div class="card-inner">
          <div class="card-front">
            <h1>Create Account</h1>
            <p>Click to register.</p>
            <div class="icon-btn-wrapper">
              <i class="fa fa-user-plus card-icon"></i>
              <input type="button" class="btn btn-default" onclick="Rotatesgnup()" value="Add">
            </div>
          </div>
          <div class="card-back">
            <button class="close" onclick="Rotatesgnupcls()">&times;</button>

            <!-- Register → DB -->
            <form asp-controller="Account" asp-action="Register" method="post">
              @Html.AntiForgeryToken()

              @* Show errors or success *@
              @if (ViewBag.Error != null) {
                <div class="alert alert-danger">@ViewBag.Error</div>
                <script>
                document.addEventListener("DOMContentLoaded", function(){
                  document.getElementById("rotatelgn").classList.add("rotate");
                });
               </script>
              }
              @if (ViewBag.Success != null) {
                <div class="alert alert-success">@ViewBag.Success</div>
                <script>
                  document.addEventListener("DOMContentLoaded", function(){
                    // ensure the signup card is never left flipped
                    document.getElementById("rotatesgnup").classList.remove("rotate");
                  }); </script>
              }

              <label>Username:</label>
              <input type="text" name="username" class="form-control" required><br>

              <label>Password:</label>
              <input type="password" name="password" class="form-control" required pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*\W).{8,}$"><br>
              <small class="text-muted">
                Must be at least 8 characters &amp; include upper/lower/digit/symbol.
              </small>
              <br>
              <label>Confirm Password:</label>
              <input type="password" name="confirmPassword" class="form-control" required><br>

              <button type="submit" class="btn btn-primary">Create Account</button>
            </form>
          </div>
        </div>
      </div>

      <!-- Login Card -->
      <div class="card rotate-box" id="rotatelgn">
        <div class="card-inner">
          <div class="card-front">
            <h1>Login</h1>
            <p>Existing user? Click to log in.</p>
            <div class="icon-btn-wrapper">
              <i class="fa fa-sign-in card-icon"></i>
              <input type="button" class="btn btn-default" onclick="Rotatelgn()" value="Login">
            </div>
          </div>
          <div class="card-back">
            <button class="close" onclick="Rotatelgncls()">&times;</button>

            <!-- Login → DB -->
            <form asp-controller="Account" asp-action="Login" method="post">
              @Html.AntiForgeryToken()

              @if (ViewBag.LoginError != null) {
                <div class="alert alert-danger">@ViewBag.LoginError</div>
                <script>
                    // only run the flip logic if there *is* an error
                    @if (ViewBag.LoginError != null) {
                    @:document.addEventListener("DOMContentLoaded", function(){
                    @:  document.getElementById("rotatelgn").classList.add("rotate");
                    @:});
                    }
                </script>
              }

              <label>Username:</label>
              <input type="text" name="loginUserName" class="form-control" required><br>

              <label>Password:</label>
              <input type="password" name="loginPassword" class="form-control" required><br>

              <button type="submit" class="btn btn-success">Login</button>
            </form>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- About Section -->
  <section id="about-section">
    <div class="container text-center">
      <h2>About Inventory Demand Optimizer</h2>
      <p class="lead">
        Inventory Demand Optimizer leverages advanced forecasting algorithms to help businesses
        predict future stock requirements, minimize overstock and stockouts, and streamline
        reorder processes. Upload your sales data, review interactive visualizations, and receive
        actionable reorder suggestions — all in one intuitive dashboard.
      </p>
      <button class="btn btn-success" onclick="Rotatelgn()">Login</button>
      <button class="btn btn-primary" onclick="Rotatesgnup()">Get Started</button>
    </div>
  </section>

  <!-- Footer -->
  <div class="footer">
    <span>&copy; Inventory Demand Optimizer</span>
    <div class="social">
      <a href="#"><i class="fa fa-facebook"></i></a>
      <a href="#"><i class="fa fa-twitter"></i></a>
      <a href="#"><i class="fa fa-linkedin"></i></a>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script>
    function Rotatesgnup()  { document.getElementById("rotatesgnup").classList.add("rotate"); }
    function Rotatesgnupcls(){ document.getElementById("rotatesgnup").classList.remove("rotate"); }
    function Rotatelgn()     { document.getElementById("rotatelgn" ).classList.add("rotate"); }
    function Rotatelgncls()  { document.getElementById("rotatelgn" ).classList.remove("rotate"); }
  </script>
</body>
</html>
